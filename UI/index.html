<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <link rel="stylesheet" href="./src/css/style.css">
        <script src="http://code.jquery.com/jquery-latest.js"></script>
        <title>Medi Crawl</title>
    </head>
    <body>
        <div class = "search-box">
            <h1>Medi Crawl</h1>
        
            <label>Find about diseases...</label>
            <input class = "search-txt" type="text" id="searchterm" name="searchengine" placeholder="Type Ex: Sinus, PCOD,.." />
            <button class="search-btn"  id="search" >
                Know more!
            </button>
        </div>

        
        <div class="search-box" id="results">
        </div>
        
        <script>
            $("#searchterm").keyup(function(e){
              var q = $("#searchterm").val();
              $.getJSON("http://en.wikipedia.org/w/api.php?callback=?",
              {
                srsearch: q,
                action: "query",
                list: "search",
                format: "json"
              },
              function(data) {
                $("#results").empty();
                $("#results").append("<p><b>" + q + "</b></p>");
                $.each(data.query.search, function(i,item){
                  $("#results").append("<div><a href='http://en.wikipedia.org/wiki/" + encodeURIComponent(item.title) + "'>" + item.title + "</a><br>" + item.snippet + "<br><br></div>");
                });
              });
            });
            
            $(document).ready(function () {
                $('#search').click(function () {
                    var q = $("#searchterm").val();
                    var showData = $('#results');

                    $.getJSON('http://localhost:8983/solr/nutch/select?fl=url,title&q=' + q, 
                    function (data) {
                    console.log(data.response.docs);
                    var textedJson = JSON.stringify(data.response.docs, undefined, 4);
                    var obj = JSON.parse(textedJson);
                    
                    showData.empty();

                        function printValues(obj) {
                            for(var k in obj) {
                                if(obj[k] instanceof Object) {
                                    printValues(obj[k]);
                                } else {
                                    var content = '<li>' + obj[k] + '</li>';
                                    var list = $('<ul />').html(content);
                                    showData.append(list);
                                };
                            }
                        };
                    
                    var data = printValues(obj);
                    showData.append(data);

                    });

                    showData.text('Loading the JSON file.');
                });
            });
        </script>

        <div id="left">
             
            <script type="text/javascript" src="./src/js/feeds.js"></script>
            <script type="text/javascript" src="https://feed.surfing-waves.com/js/rss-feed.js"></script>
             
        </div>

        <script src= "./src/js/jquery.min.js"></script>
        <script src="https://cdnjs.cloudfare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
        
        
    </body>
</html>